/* ===== THEME VARIABLES ===== */

/* LIGHT (domyślny) */
:root{
  --bg: #f3f4f6;
  --text: #111827;
  --card: #ffffff;
  --accent: #38bdf8;
  --btn: #22c55e;
  --btnText: #022c22;
  --shadow: rgba(0,0,0,0.15);

  --highlight-bg: yellow;
  --highlight-text: #111827;

  color-scheme: light;
}

/* DARK */
:root[data-theme="dark"]{
  --bg: #111827;
  --text: #e5e7eb;
  --card: #1f2933;
  --accent: #38bdf8;
  --btn: #22c55e;
  --btnText: #022c22;
  --shadow: rgba(0,0,0,0.40);

  --highlight-bg: yellow;
  --highlight-text: #000000;

  color-scheme: dark;
}


/* ===== CANVAS BOARD ===== */
/* Stylus - rysuje na kanvasie */
#board{
  border: 1px solid rgba(127,127,127,.35);
  border-radius: 12px;
  background: var(--card);
  touch-action: none; /* ważne: bez tego dotyk potrafi scrollować */
  display: block;
  max-width: 100%;    /* pozwól canvadowi skalować się do ekranu */
  height: auto;       /* zachowaj proporcje przy responsywności */
}


/* ===== GESTURE & TOUCH BLOCKING ===== */
/* Zapobiega domyślnym gestom przeglądarki na przeciąganych elementach */
.fun-panel,
.board-wrap,
.tool-toggle {
  touch-action: none;          /* nie pozwalaj na pan/zoom gestami */
  -ms-touch-action: none;      /* starszy Edge/IE */
}

.fun-panel h2#funHeader {
  touch-action: none;          /* nagłówek panelu - główny uchwyt do przeciągania */
}

html, body {
  overscroll-behavior-x: none; /* mniej "przebijania" gestów w bok */
}

/* ===== LAYOUT & TYPOGRAPHY ===== */
/* Główne elementy strony: background, tekst, karty */

body{
  font-family: Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 60px;
}

.card{
  /* Główna kartka z powitaniem - ma cień i zaokrąglenie */
  background: var(--card);
  padding: 24px 32px;
  border-radius: 12px;
  box-shadow: 0 10px 25px var(--shadow);
  max-width: 420px;
  text-align: center;
}

h1{
  margin-bottom: 8px;
  color: var(--accent);
}

p{ margin: 6px 0; }

.btn{
  /* Przycisk główny "Uczę się dalej" */
  margin-top: 16px;
  display: inline-block;
  padding: 10px 18px;
  border-radius: 999px;
  background: var(--btn);
  color: var(--btnText);
  text-decoration: none;
  font-weight: bold;
}

.btn:hover{ filter: brightness(0.9); }

.srupon{
  /* Wyróżnienie tekstu - żółte */
  background: var(--highlight-bg);
  color: var(--highlight-text);
  padding: 6px 10px;
  border-radius: 8px;
}

/* ===== FUN PANEL (floating, draggable, collapsible) ===== */
/* Prawy panel z przyciskami zabawy - można ciągnąć i zwijać */

.fun-panel{
  position: fixed;
  top: 120px;
  right: 20px;
  width: 300px;
  background: var(--card);
  box-shadow: 0 10px 25px var(--shadow);
  border-radius: 12px;
  padding: 10px;
  z-index: 9999;
}

.fun-panel.collapsed .fun-buttons,
.fun-panel.collapsed #funStatus,
.fun-panel.collapsed #clickCount,
.fun-panel.collapsed .fun-reset-btn{
  display: none;
}

.fun-panel.is-hidden {
  display: none;
}

.fun-panel h2{
  margin: 0 0 8px;
  font-size: 15px;
  cursor: grab;         /* wskazuje że to uchwyt do przeciągania */
  touch-action: none;   /* ważne na dotyku */
  user-select: none;
}

.fun-buttons{
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  justify-content: center;
  margin: 10px 0;
}

.fun-buttons button{
  padding: 6px 8px;
  border-radius: 8px;
  border: 1px solid rgba(127,127,127,.35);
  background: rgba(255,255,255,.06);
  color: var(--text);
  cursor: pointer;
  font-size: 13px;
}

.fun-buttons button:hover{ filter: brightness(1.05); }

.fun-status {
  /* Wyświetla feedback z ostatniej akcji */
  font-size: 12px;
  padding: 4px 0;
  min-height: 16px;
  opacity: .9;
  margin: 4px 0 0;
}

.fun-counter {
  /* Licznik kliknięć na przycisku "Licznik" */
  font-size: 12px;
  font-weight: bold;
  padding: 4px 0;
  opacity: .9;
  margin: 4px 0 0;
}

.fun-reset-btn {
  /* Przycisk resetujący wszystkie efekty */
  width: 100%;
  margin-top: 8px;
  padding: 6px 8px;
  border-radius: 8px;
  border: 1px solid rgba(127,127,127,.35);
  background: rgba(255,255,255,.06);
  color: var(--text);
  cursor: pointer;
  font-size: 13px;
}

.fun-reset-btn:hover{ filter: brightness(1.05); }

/* ===== TOP BAR BUTTONS ===== */
/* Przyciski w górnych rogach: zmiana motywu (prawy) i menu (lewy) */

/* Przycisk zmiana motywu (jasny/ciemny) */
.theme-toggle{
  position: fixed;
  top: 14px;
  right: 14px;
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,.2);
  background: rgba(255,255,255,.85);
  cursor: pointer;
}
:root[data-theme="dark"] .theme-toggle{
  background: rgba(15,23,42,.85);
  color: #f9fafb;
  border-color: rgba(148,163,184,.6);
}

/* Przycisk otworzenia menu (sidebar) */
.sidebar-toggle{
  position: fixed;
  top: 14px;
  left: 14px;
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,.2);
  background: rgba(255,255,255,.85);
  cursor: pointer;
  z-index: 10000;
}

:root[data-theme="dark"] .sidebar-toggle{
  background: rgba(15,23,42,.85);
  color: #f9fafb;
  border-color: rgba(148,163,184,.6);
}


/* ===== SIDEBAR (Menu node) ===== */
/* Panel po lewej stronie - wysuwane menu z nawigacją */

/* Półprzezroczyste ciemne tło pod sidebarem */
.sidebar-overlay{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  z-index: 10001;
}

/* Sam sidebar - wysuwany z lewej */
.sidebar{
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 280px;
  background: var(--card);
  color: var(--text);
  box-shadow: 8px 0 25px var(--shadow);
  z-index: 10002;

  transform: translateX(-105%); /* wysuwa się z lewej strony */
  transition: transform .2s ease;
  padding: 12px;
}

.sidebar.open{
  transform: translateX(0);
}

.sidebar-header{
  /* Nagłówek sidebara z przyciskiem zamknięcia */
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding-bottom: 10px;
  border-bottom: 1px solid rgba(127,127,127,.25);
  margin-bottom: 10px;
}

.sidebar-close{
  border: 1px solid rgba(127,127,127,.35);
  background: rgba(255,255,255,.06);
  color: var(--text);
  border-radius: 10px;
  padding: 6px 10px;
  cursor: pointer;
}

.sidebar-nav{
  /* Linki nawigacyjne w sidebarem */
  display: grid;
  gap: 8px;
  margin-bottom: 12px;
}

.sidebar-nav a{
  text-decoration: none;
  color: var(--text);
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(127,127,127,.25);
  background: rgba(255,255,255,.04);
}

.sidebar-nav a:hover{
  filter: brightness(1.05);
}

.sidebar-box{
  /* Kontener dla kontrolek rysowania */
  padding: 10px;
  border-radius: 12px;
  border: 1px solid rgba(127,127,127,.25);
  background: rgba(255,255,255,.04);
}



/* ===== DRAWING CONTROLS ===== */
/* Kontrolki dla tablicy rysowania w sidebar */

.draw-controls{
  margin-top: 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
  justify-content: center;
}

.draw-controls .color{
  padding: 6px 10px;
  border-radius: 10px;
  border: 1px solid rgba(127,127,127,.35);
  background: rgba(255,255,255,.06);
  color: var(--text);
  cursor: pointer;
}

.draw-controls label{
  display: flex;
  gap: 8px;
  align-items: center;
  font-size: 14px;
}


/* ===== BOARD WRAPPER & TOOL UI ===== */
/* Tablica rysowania i jej kontrolki */

.board-wrap{
  position: relative;
  display: inline-block; /* trzyma się rozmiaru canvasa i jego overlaya */
}

/* Przycisk ⚙️ do otworzenia opcji rysowania */
.tool-toggle{
  position: absolute;
  top: 10px;
  left: 10px;
  width: 34px;
  height: 34px;
  border-radius: 10px;
  border: 1px solid rgba(127,127,127,.35);
  background: rgba(255,255,255,.18);
  color: var(--text);
  cursor: pointer;
  backdrop-filter: blur(6px);
}

:root[data-theme="dark"] .tool-toggle{
  background: rgba(15,23,42,.35);
  border-color: rgba(148,163,184,.45);
}

/* Wysuwane opcje rysowania (kolory, grubość, przezroczystość) */
.toolbox{
  position: absolute;
  top: 52px;
  left: 10px;
  width: 220px;
  padding: 10px;
  border-radius: 12px;
  border: 1px solid rgba(127,127,127,.25);
  background: rgba(255,255,255,.18);
  backdrop-filter: blur(8px);
  box-shadow: 0 10px 25px var(--shadow);
}

:root[data-theme="dark"] .toolbox{
  background: rgba(15,23,42,.35);
  border-color: rgba(148,163,184,.35);
}

.tool-row{
  /* Jeden rząd opcji (kolor, rozmiar, etc) */
  display: flex;
  gap: 8px;
  align-items: center;
  justify-content: flex-start;
  margin: 8px 0;
  font-size: 13px;
}

.mini{
  /* Małe przyciski w toolbox */
  padding: 6px 8px;
  border-radius: 10px;
  border: 1px solid rgba(127,127,127,.35);
  background: rgba(255,255,255,.06);
  color: var(--text);
  cursor: pointer;
}

.mini:hover {
  filter: brightness(1.05);
}

.toolbox input[type="range"]{
  width: 120px;
}


/* ===== BOARD POSITIONING & SIZING ===== */
/* Tablica rysowania - pozycjonowanie i presety rozmiaru */

.board-wrap.floating{
  position: fixed;
  top: 220px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 9001; /* pod sidebar (10002), nad stroną */
}

.board-wrap.hidden{
  display: none;
}

/* Presety rozmiaru tablicy (S, M, L) */
.board-wrap.size-s #board{ width: 380px; max-width: 92vw; height: 220px; }
.board-wrap.size-m #board{ width: 600px; max-width: 92vw; height: 350px; }
.board-wrap.size-l #board{ width: 900px; max-width: 92vw; height: 520px; }

/* ===== MOBILE ADJUSTMENTS ===== */
@media (max-width: 600px) {
  /* Na małych ekranach nie centrować przez translate, trzymaj w widocznym obszarze */
  .board-wrap.floating{
    left: 10px;
    right: 10px;
    transform: none;
    top: 140px;
    width: auto;
  }

  /* Canvas zajmuje całą dostępną szerokość, wysokość dopasowuje się automatycznie */
  .board-wrap.size-s #board,
  .board-wrap.size-m #board,
  .board-wrap.size-l #board {
    width: 100%;
    max-width: 100%;
    height: auto;
  }

  body { padding-top: 48px; }
}


/* ===== SIDEBAR ACTION BUTTONS ===== */
/* Przyciski akcji w sidebarem (Tablica, Try zabawy, rozmiary) */

.sidebar-action{
  /* Główne przyciski akcji w sidebar */
  width: 100%;
  margin-top: 10px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(127,127,127,.25);
  background: rgba(255,255,255,.04);
  color: var(--text);
  cursor: pointer;
  text-align: left;
}

.sidebar-action.small{
  /* Małe przyciski do wyboru rozmiaru (S, M, L) */
  width: auto;
  text-align: center;
  margin-top: 6px;
  padding: 6px 10px;
}

.sidebar-board-sizes{
  display: flex;
  gap: 8px;
  margin-top: 6px;
}